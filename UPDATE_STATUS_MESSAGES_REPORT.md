# üì± –û–¢–ß–ï–¢: –î–û–ë–ê–í–õ–ï–ù–ò–ï –°–û–û–ë–©–ï–ù–ò–ô –û –°–û–°–¢–û–Ø–ù–ò–ò –ü–†–û–í–ï–†–ö–ò –û–ë–ù–û–í–õ–ï–ù–ò–ô

## üéØ –û–ë–ó–û–†

–î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏: "–£ –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è" –∏–ª–∏ "–î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è X.X.X".

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### **1. üîß –û–±–Ω–æ–≤–ª–µ–Ω UpdateSettingsViewModel**

#### **–î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
```kotlin
private val _updateCheckStatus = MutableStateFlow<String?>(null)
val updateCheckStatus: StateFlow<String?> = _updateCheckStatus.asStateFlow()
```

#### **–û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ checkForUpdates():**
```kotlin
fun checkForUpdates() {
    viewModelScope.launch {
        _isCheckingUpdates.value = true
        _updateCheckError.value = null
        _updateCheckStatus.value = null  // ‚Üê –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Å—Ç–∞—Ç—É—Å
        
        try {
            val updateManager = UpdateManager(context)
            val result = updateManager.checkForUpdatesWithResult()
            
            if (result.success) {
                if (result.update != null) {
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–æ—Å—Ç—É–ø–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
                    updatePreferences.setAvailableUpdate(...)
                    _updateCheckStatus.value = "–î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è ${result.update.versionName}"  // ‚Üê –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                } else {
                    // –û—á–∏—â–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–æ—Å—Ç—É–ø–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
                    updatePreferences.clearAvailableUpdate()
                    _updateCheckStatus.value = "–£ –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è"  // ‚Üê –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
                updatePreferences.setLastUpdateCheckTime(System.currentTimeMillis())
            } else {
                _updateCheckError.value = result.error ?: "–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π"
            }
        } catch (e: Exception) {
            _updateCheckError.value = "–û—à–∏–±–∫–∞: ${e.message}"
        } finally {
            _isCheckingUpdates.value = false
        }
    }
}
```

#### **–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ç—É—Å–∞:**
```kotlin
fun clearUpdateCheckStatus() {
    _updateCheckStatus.value = null
}
```

### **2. üé® –û–±–Ω–æ–≤–ª–µ–Ω SettingsScreen**

#### **–î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
```kotlin
val updateCheckStatus by updateSettingsVM.updateCheckStatus.collectAsState(initial = null)
val lastUpdateCheckTime by updateSettingsVM.lastUpdateCheckTime.collectAsState(initial = 0L)
```

#### **–û–±–Ω–æ–≤–ª–µ–Ω –≤—ã–∑–æ–≤ UpdateSettingsCard:**
```kotlin
UpdateSettingsCard(
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    updateCheckStatus = updateCheckStatus,
    lastUpdateCheckTime = lastUpdateCheckTime,
    onClearUpdateStatus = {
        updateSettingsVM.clearUpdateCheckStatus()
    },
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
)
```

### **3. üé® –û–±–Ω–æ–≤–ª–µ–Ω UpdateSettingsCard**

#### **–ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```kotlin
@Composable
fun UpdateSettingsCard(
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    updateCheckStatus: String?,
    lastUpdateCheckTime: Long,
    onClearUpdateStatus: () -> Unit,
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
)
```

#### **–î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```kotlin
// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏, –µ—Å–ª–∏ –µ—Å—Ç—å
if (lastUpdateCheckTime > 0L) {
    Spacer(Modifier.height(8.dp))
    Text(
        text = "–ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞: ${formatLastCheckTime(lastUpdateCheckTime)}",
        style = MaterialTheme.typography.bodySmall,
        color = MaterialTheme.colorScheme.onSurfaceVariant
    )
}
```

#### **–î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è:**
```kotlin
// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
updateCheckStatus?.let { status ->
    Spacer(Modifier.height(8.dp))
    Card(
        modifier = Modifier.fillMaxWidth(),
        colors = CardDefaults.cardColors(
            containerColor = if (status.contains("–ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è")) {
                MaterialTheme.colorScheme.primaryContainer  // –ó–µ–ª–µ–Ω—ã–π –¥–ª—è "–ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è"
            } else {
                MaterialTheme.colorScheme.secondaryContainer  // –°–∏–Ω–∏–π –¥–ª—è "–¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è"
            }
        )
    ) {
        Row(
            modifier = Modifier
                .fillMaxWidth()
                .padding(12.dp),
            verticalAlignment = Alignment.CenterVertically,
            horizontalArrangement = Arrangement.SpaceBetween
        ) {
            Row(
                verticalAlignment = Alignment.CenterVertically,
                modifier = Modifier.weight(1f)
            ) {
                Icon(
                    imageVector = if (status.contains("–ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è")) {
                        Icons.Filled.CheckCircle  // ‚úÖ –¥–ª—è "–ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è"
                    } else {
                        Icons.Filled.Update  // üîÑ –¥–ª—è "–¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è"
                    },
                    contentDescription = "–°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è",
                    tint = if (status.contains("–ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è")) {
                        MaterialTheme.colorScheme.primary
                    } else {
                        MaterialTheme.colorScheme.secondary
                    },
                    modifier = Modifier.size(20.dp)
                )
                Spacer(Modifier.width(8.dp))
                Text(
                    text = status,
                    style = MaterialTheme.typography.bodyMedium,
                    color = if (status.contains("–ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è")) {
                        MaterialTheme.colorScheme.onPrimaryContainer
                    } else {
                        MaterialTheme.colorScheme.onSecondaryContainer
                    }
                )
            }
            IconButton(
                onClick = onClearUpdateStatus,
                modifier = Modifier.size(24.dp)
            ) {
                Icon(
                    imageVector = Icons.Filled.Close,
                    contentDescription = "–ó–∞–∫—Ä—ã—Ç—å",
                    tint = if (status.contains("–ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è")) {
                        MaterialTheme.colorScheme.onPrimaryContainer
                    } else {
                        MaterialTheme.colorScheme.onSecondaryContainer
                    },
                    modifier = Modifier.size(16.dp)
                )
            }
        }
    }
}
```

### **4. üïí –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏**

```kotlin
/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ —á–∏—Ç–∞–µ–º—ã–π –≤–∏–¥
 */
private fun formatLastCheckTime(timestamp: Long): String {
    val now = System.currentTimeMillis()
    val diff = now - timestamp
    
    return when {
        diff < 60_000 -> "—Ç–æ–ª—å–∫–æ —á—Ç–æ" // –º–µ–Ω–µ–µ –º–∏–Ω—É—Ç—ã
        diff < 3600_000 -> "${diff / 60_000} –º–∏–Ω. –Ω–∞–∑–∞–¥" // –º–µ–Ω–µ–µ —á–∞—Å–∞
        diff < 86400_000 -> "${diff / 3600_000} —á. –Ω–∞–∑–∞–¥" // –º–µ–Ω–µ–µ —Å—É—Ç–æ–∫
        else -> {
            val dateFormat = SimpleDateFormat("dd.MM.yyyy HH:mm", Locale.getDefault())
            dateFormat.format(Date(timestamp))
        }
    }
}
```

## üé® –î–ò–ó–ê–ô–ù –ò UX

### **1. üì± –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã**

#### **–î–ª—è "–ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è":**
- ‚úÖ **–¶–≤–µ—Ç:** Primary Container (–∑–µ–ª–µ–Ω—ã–π)
- ‚úÖ **–ò–∫–æ–Ω–∫–∞:** CheckCircle (–≥–∞–ª–æ—á–∫–∞ –≤ –∫—Ä—É–≥–µ)
- ‚úÖ **–°–æ–æ–±—â–µ–Ω–∏–µ:** "–£ –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è"

#### **–î–ª—è "–¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è":**
- üîÑ **–¶–≤–µ—Ç:** Secondary Container (—Å–∏–Ω–∏–π)
- üîÑ **–ò–∫–æ–Ω–∫–∞:** Update (—Å—Ç—Ä–µ–ª–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
- üîÑ **–°–æ–æ–±—â–µ–Ω–∏–µ:** "–î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è X.X.X"

### **2. üïí –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏**

**–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏:**
- **< 1 –º–∏–Ω—É—Ç—ã:** "—Ç–æ–ª—å–∫–æ —á—Ç–æ"
- **< 1 —á–∞—Å–∞:** "X –º–∏–Ω. –Ω–∞–∑–∞–¥"
- **< 1 —Å—É—Ç–æ–∫:** "X —á. –Ω–∞–∑–∞–¥"
- **> 1 —Å—É—Ç–æ–∫:** "dd.MM.yyyy HH:mm"

### **3. üéõÔ∏è –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**

- ‚úÖ **–ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è** –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è —Å—Ç–∞—Ç—É—Å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞** –ø—Ä–∏ –Ω–æ–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏** –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

## üìä –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–ò–ô –û–ü–´–¢

### **1. ‚úÖ –£–ª—É—á—à–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏**

#### **–î–û (—Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è):**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å"
- –í–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ "–ü—Ä–æ–≤–µ—Ä—è–µ–º..." –∏–ª–∏ –æ—à–∏–±–∫—É
- –ù–µ –∑–Ω–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

#### **–ü–û–°–õ–ï (–Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è):**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å"
- –í–∏–¥–∏—Ç "–ü—Ä–æ–≤–µ—Ä—è–µ–º..." –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ü–æ–ª—É—á–∞–µ—Ç —á–µ—Ç–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ:
  - "–£ –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è" ‚úÖ
  - "–î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è 1.2.0" üîÑ
- –í–∏–¥–∏—Ç –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ú–æ–∂–µ—Ç –∑–∞–∫—Ä—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–æ–π ‚ùå

### **2. üéØ –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å**

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ç–µ–ø–µ—Ä—å –∑–Ω–∞–µ—Ç:**
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- ‚úÖ –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ –î–æ—Å—Ç—É–ø–Ω–∞ –ª–∏ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è
- ‚úÖ –ú–æ–∂–µ—Ç –ª–∏ –∑–∞–∫—Ä—ã—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

### **3. üé® –í–∏–∑—É–∞–ª—å–Ω–∞—è —è—Å–Ω–æ—Å—Ç—å**

- ‚úÖ **–¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è
- ‚úÖ **–ò–∫–æ–Ω–∫–∏** –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π
- ‚úÖ **–ß–µ—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –±–µ–∑ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∂–∞—Ä–≥–æ–Ω–∞
- ‚úÖ **–ö–æ–º–ø–∞–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** –±–µ–∑ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ UI

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### **1. üìä State Management**

```kotlin
// –ù–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ ViewModel
private val _updateCheckStatus = MutableStateFlow<String?>(null)
val updateCheckStatus: StateFlow<String?> = _updateCheckStatus.asStateFlow()

// –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –Ω–æ–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ
_updateCheckStatus.value = null

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
_updateCheckStatus.value = "–£ –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è"
_updateCheckStatus.value = "–î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è ${result.update.versionName}"
```

### **2. üé® UI Components**

```kotlin
// –£—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
updateCheckStatus?.let { status ->
    Card(
        colors = CardDefaults.cardColors(
            containerColor = if (status.contains("–ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è")) {
                MaterialTheme.colorScheme.primaryContainer
            } else {
                MaterialTheme.colorScheme.secondaryContainer
            }
        )
    ) {
        // –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞—Ä—Ç–æ—á–∫–∏
    }
}
```

### **3. üïí Time Formatting**

```kotlin
// –£–º–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
private fun formatLastCheckTime(timestamp: Long): String {
    val diff = System.currentTimeMillis() - timestamp
    return when {
        diff < 60_000 -> "—Ç–æ–ª—å–∫–æ —á—Ç–æ"
        diff < 3600_000 -> "${diff / 60_000} –º–∏–Ω. –Ω–∞–∑–∞–¥"
        diff < 86400_000 -> "${diff / 3600_000} —á. –Ω–∞–∑–∞–¥"
        else -> SimpleDateFormat("dd.MM.yyyy HH:mm", Locale.getDefault())
            .format(Date(timestamp))
    }
}
```

## üöÄ –†–ï–ó–£–õ–¨–¢–ê–¢

### **‚úÖ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ü–µ–ª–∏:**

1. **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
2. **–ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å** - —á–µ—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–∑ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤
3. **–í–∏–∑—É–∞–ª—å–Ω–∞—è —è—Å–Ω–æ—Å—Ç—å** - —Ü–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏–∫–æ–Ω–∫–∏
4. **–£–¥–æ–±—Å—Ç–≤–æ** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–∫—Ä—ã—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
5. **–ö–æ–Ω—Ç–µ–∫—Å—Ç** - –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

### **üéØ –£–ª—É—á—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞:**

- ‚úÖ **–ü–æ–Ω—è—Ç–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- ‚úÖ **–í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã** —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Ä–µ–º–µ–Ω–∏** –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- ‚úÖ **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –≤–∏–¥** –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### **üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:**

- ‚úÖ **–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ **–†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ** —Å StateFlow
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π UI** –±–µ–∑ –ª–∏—à–Ω–∏—Ö –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–æ–∫
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–£—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π. –¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç —á–µ—Ç–∫—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, –≤–∏–¥—è—Ç –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

**–°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å—Ç–∞–ª–∞ –±–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–π –∏ —É–¥–æ–±–Ω–æ–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!** üöÄ
